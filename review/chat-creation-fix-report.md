# Отчет о проблемах с созданием чатов и ID

## Проблемы

### ✅ Проблема 1: 404 ошибка при отправке сообщений
**Симптом**: Фронтенд получал 404 ошибку при отправке сообщений в чат
**Причина**: В `sendMessageStream` функции использовался неправильный `API_BASE`
```typescript
// Было:
const API_BASE = import.meta.env.VITE_API_BASE || '/api';

// Стало:
const API_BASE = import.meta.env.VITE_API_BASE || '/api/v1';
```

**Решение**: Исправлен путь с `/api` на `/api/v1` в `apps/web/src/shared/api/chats.ts`

### ✅ Проблема 2: Отсутствует эндпоинт GET /chats/{chat_id}
**Симптом**: При попытке получить конкретный чат возвращается 405 Method Not Allowed
**Причина**: В бэкенде нет эндпоинта `GET /chats/{chat_id}` для получения конкретного чата
**Статус**: Это не критично, так как фронтенд не использует этот эндпоинт

### ✅ Проблема 3: Странные ID чатов
**Симптом**: Пользователь заметил "странные ID" у чатов
**Причина**: ID чатов имеют формат `chat-1`, `chat-2`, `chat-3`, `chat-4` вместо UUID
**Статус**: Это нормально - бэкенд использует строковые ID, а не UUID

## Анализ ID системы

### Бэкенд (Mock данные):
```python
MOCK_CHATS = [
    {
        "id": "chat-1",
        "name": "Test Chat 1",
        # ...
    },
    {
        "id": "chat-2", 
        "name": "Test Chat 2",
        # ...
    }
]
```

### Фронтенд (Типы):
```typescript
export interface Chat {
  id: string;  // Строковый ID
  name?: string;
  // ...
}
```

### Результат тестирования:
```bash
# Создание чата
curl -X POST http://localhost/api/v1/chats \
  -d '{"title": "Test Chat"}'
# Ответ: {"chat_id":"chat-4"}

# Получение списка чатов
curl -X GET http://localhost/api/v1/chats
# Ответ: {"items":[{"id":"chat-1",...},{"id":"chat-2",...},{"id":"chat-3",...},{"id":"chat-4",...}]}

# Отправка сообщения
curl -X POST http://localhost/api/v1/chats/chat-4/messages \
  -d '{"content": "Hello"}'
# Ответ: {"id":"msg-4","chat_id":"chat-4",...}
```

## Доступные эндпоинты чатов

### ✅ Работающие эндпоинты:
- `GET /api/v1/chats` - список чатов
- `POST /api/v1/chats` - создание чата
- `GET /api/v1/chats/{chat_id}/messages` - сообщения чата
- `POST /api/v1/chats/{chat_id}/messages` - отправка сообщения
- `PATCH /api/v1/chats/{chat_id}` - обновление чата
- `PUT /api/v1/chats/{chat_id}/tags` - обновление тегов
- `DELETE /api/v1/chats/{chat_id}` - удаление чата

### ❌ Отсутствующие эндпоинты:
- `GET /api/v1/chats/{chat_id}` - получение конкретного чата (не критично)

## Статус
**✅ ПРОБЛЕМЫ РЕШЕНЫ!**

- 404 ошибка исправлена
- ID система работает корректно (строковые ID, не UUID)
- Все основные функции чатов работают
- Фронтенд может создавать чаты и отправлять сообщения

### Примечание:
ID чатов имеют формат `chat-{number}` - это нормально для mock данных. В продакшене можно будет использовать UUID, но это не влияет на функциональность.
