# =============================================================================
# ML Portal Development Environment Configuration
# =============================================================================
# Environment variables for local development

# =============================================================================
# GENERAL APPLICATION SETTINGS
# =============================================================================
# Environment and debug mode
ENV=development
DEBUG=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database settings
DATABASE_URL=postgresql://ml_portal:ml_portal_password@postgres:5432/ml_portal
DB_URL=postgresql://ml_portal:ml_portal_password@postgres:5432/ml_portal
ASYNC_DB_URL=postgresql+asyncpg://ml_portal:ml_portal_password@postgres:5432/ml_portal
POSTGRES_DB=ml_portal
POSTGRES_USER=ml_portal
POSTGRES_PASSWORD=ml_portal_password

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis URL for caching, sessions, and idempotency
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# JWT secrets (for development only)
JWT_SECRET=dev-jwt-secret-minimum-256-bits-for-development-use-only-change-in-production
JWT_ALGORITHM=HS256
JWT_ISSUER=urn:ml-portal-dev
JWT_AUDIENCE=urn:ml-portal:api
JWT_ACCESS_TTL_MINUTES=15
JWT_REFRESH_TTL_DAYS=30
JWT_JWKS_JSON=
JWT_KID=

# Personal Access Tokens
PAT_ENABLED=true

# =============================================================================
# PASSWORD POLICY
# =============================================================================
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=false
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_SPECIAL=false
PASSWORD_PEPPER=

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================
# LLM service
LLM_BASE_URL=http://llm:8002
HTTP_TIMEOUT_SECONDS=30
HTTP_MAX_RETRIES=2
TIMEOUT_SECONDS=30

# Embeddings service
EMB_BASE_URL=http://emb:8001

# Circuit Breaker Configuration
CB_LLM_FAILURES_THRESHOLD=5
CB_LLM_OPEN_TIMEOUT_SECONDS=30.0
CB_LLM_HALF_OPEN_MAX_CALLS=1
CB_EMB_FAILURES_THRESHOLD=5
CB_EMB_OPEN_TIMEOUT_SECONDS=30.0
CB_EMB_HALF_OPEN_MAX_CALLS=1

# =============================================================================
# MINIO/S3 STORAGE CONFIGURATION
# =============================================================================
# MinIO S3-compatible storage settings
S3_ENDPOINT=minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin123
S3_SECURE=false
S3_BUCKET_RAG=rag
S3_BUCKET_ARTIFACTS=artifacts
UPLOAD_MAX_BYTES=104857600
UPLOAD_ALLOWED_MIME=application/pdf,image/png,image/jpeg,application/octet-stream

# =============================================================================
# QDRANT VECTOR DATABASE
# =============================================================================
# Qdrant vector database for embeddings
QDRANT_URL=http://qdrant:6333
QDRANT_API_KEY=

# =============================================================================
# IDEMPOTENCY CONFIGURATION
# =============================================================================
# Idempotency key handling
IDEMPOTENCY_ENABLED=false
IDEMP_TTL_HOURS=24
IDEMPOTENCY_MAX_BYTES=1048576

# =============================================================================
# CELERY WORKER CONFIGURATION
# =============================================================================
# Celery task queue settings
BEAT=0

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Cross-Origin Resource Sharing settings
CORS_ALLOW_ORIGINS=*

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Frontend application settings
VITE_API_BASE_URL=http://localhost:8000
VITE_APP_NAME=ML Portal Dev
NEXT_PUBLIC_API_URL=http://localhost:8000

# =============================================================================
# NGINX CONFIGURATION
# =============================================================================
# Nginx reverse proxy settings
NGINX_PORT_HTTP=80
NGINX_CLIENT_MAX_BODY_SIZE=100M
NGINX_PROXY_TIMEOUT=300s

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
# Health check endpoints settings
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Logging level and configuration
LOG_LEVEL=DEBUG

# =============================================================================
# RABBITMQ CONFIGURATION
# =============================================================================
# RabbitMQ for Celery broker
RABBITMQ_URL=amqp://admin:admin123@rabbitmq:5672
