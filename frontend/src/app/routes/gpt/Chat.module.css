.wrap { height: 100%; display: grid; }
.panel {
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 10px;
  padding: 12px;
  background: var(--chat-panel-bg, var(--panel-alt, #f4f6ff));
  border: 1px solid var(--chat-panel-border, rgba(0,0,0,0.08));
  border-radius: var(--radius);
  margin-top: 0; /* выравнивание с карточкой списка чатов */
}
.messages { overflow: auto; padding: 4px; }
.empty { color: var(--muted); text-align: center; padding: 24px; }
.user { background: rgba(79,124,255,0.12); border: 1px solid rgba(79,124,255,0.25); padding: 10px 12px; border-radius: 12px; margin: 8px 0 8px auto; max-width: 75%; }
.assistant { background: rgba(0,0,0,0.04); border: 1px solid rgba(0,0,0,0.08); padding: 10px 12px; border-radius: 12px; margin: 8px auto 8px 0; max-width: 75%; white-space: pre-wrap; }
.typing { opacity: .6; }

.messageContent {
  margin-bottom: 0.5rem;
}

.messageTime {
  font-size: 0.75rem;
  color: var(--muted);
  opacity: 0.7;
  text-align: right;
}

.loadMore {
  display: flex;
  justify-content: center;
  padding: 1rem;
  border-bottom: 1px solid var(--color-border);
  margin-bottom: 1rem;
}

.composer {
  display: grid;
  grid-template-columns: 1fr max-content;
  gap: 10px;
  align-items: stretch;
  min-height: 120px;
  max-height: clamp(160px, 32vh, 40dvh);
}
.inputArea { grid-column: 1 / 2; display: flex; }
.inputArea textarea {
  display: block;
  width: 100%;
  min-height: 80px;
  resize: none;
  overflow: auto;
  box-sizing: border-box;
}
.controls { grid-column: 2 / 3; width: max-content; display: grid; grid-template-rows: 1fr auto; height: 100%; }
.actionsBottom { margin-top: auto; display: grid; gap: 8px; justify-items: start; align-content: end; }
.ragToggle { display: inline-flex; align-items: center; gap: 8px; font-size: 13px; color: var(--muted); }
.ragToggle input { transform: translateY(1px); }
