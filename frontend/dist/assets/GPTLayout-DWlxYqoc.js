import{r as c,j as e,u as m,N as o,O as g}from"./index-FkM6qUsl.js";import{B as l}from"./Button-t5z5qQ-u.js";import{u as p}from"./auth-DSwyWdaC.js";import"./http-B8UuqdIS.js";import"./idempotency-C3fxGORY.js";const _="_shell_phevr_2",v="_header_phevr_9",u="_brand_phevr_22",x="_brandName_phevr_33",j="_nav_phevr_41",N="_segWrap_phevr_45",f="_seg_phevr_45",b="_segBtn_phevr_60",k="_active_phevr_72",B="_right_phevr_77",S="_user_phevr_82",w="_main_phevr_95",y="_footer_phevr_104",s={shell:_,header:v,brand:u,brandName:x,nav:j,segWrap:N,seg:f,segBtn:b,active:k,right:B,user:S,main:w,footer:y},d="theme";function E(){const t=localStorage.getItem(d);return t==="light"||t==="dark"?t:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function C(){const[t,n]=c.useState(E());return c.useEffect(()=>{const a=document.documentElement;t==="dark"?a.removeAttribute("data-theme"):a.setAttribute("data-theme","light"),localStorage.setItem(d,t)},[t]),e.jsx("button",{onClick:()=>n(a=>a==="dark"?"light":"dark"),"aria-label":"Переключить тему",style:{background:"transparent",border:"1px solid rgba(255,255,255,.15)",color:"inherit",borderRadius:12,padding:"6px 10px",cursor:"pointer"},children:t==="light"?"☀️ Light":"🌙 Dark"})}const A=!1;function T(){const t=m(),{logout:n,user:a}=p(),i=((a==null?void 0:a.role)||"").toLowerCase()==="admin";return e.jsxs("div",{className:s.shell,children:[e.jsxs("header",{className:s.header,children:[e.jsxs("div",{className:s.brand,children:[e.jsx("img",{src:"/logo.png",alt:"Почемучка logo",onError:r=>{const h=r.currentTarget;h.style.display="none"}}),e.jsx("div",{className:s.brandName,children:"Почемучка"})]}),e.jsx("nav",{className:s.nav,children:e.jsx("div",{className:s.segWrap,children:e.jsxs("div",{className:s.seg,children:[e.jsx(o,{to:"/gpt/chat",className:({isActive:r})=>[s.segBtn,r?s.active:""].join(" "),children:"Чат"}),e.jsx(o,{to:"/gpt/analyze",className:({isActive:r})=>[s.segBtn,r?s.active:""].join(" "),children:"Аналитика"}),i&&e.jsx(o,{to:"/gpt/rag",className:({isActive:r})=>[s.segBtn,r?s.active:""].join(" "),children:"База знаний"})]})})}),e.jsxs("div",{className:s.right,children:[A,e.jsx("span",{className:s.user,children:(a==null?void 0:a.role)||""}),e.jsx(C,{}),i&&e.jsx(l,{variant:"outline",onClick:()=>t("/admin"),children:"Админка"}),e.jsx(l,{variant:"ghost",onClick:async()=>{await n(),t("/login")},children:"Выйти"})]})]}),e.jsx("main",{className:s.main,children:e.jsx(g,{})}),e.jsx("footer",{className:s.footer})]})}export{T as default};
