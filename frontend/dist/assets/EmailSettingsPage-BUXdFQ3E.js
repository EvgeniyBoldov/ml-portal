import{c as h,r as o,j as s}from"./index-By90sLri.js";import{a as u}from"./admin-DK_EKAlb.js";import{B as x}from"./Button-B5J9uU7E.js";import{S as l}from"./Skeleton-CMKQVm89.js";import"./idempotency-C3fxGORY.js";const p="_page_8zlqp_1",f="_pageHeader_8zlqp_6",j="_pageTitle_8zlqp_10",g="_pageDescription_8zlqp_17",N="_statusCard_8zlqp_23",L="_statusHeader_8zlqp_31",v="_statusTitle_8zlqp_38",b="_statusBadge_8zlqp_45",S="_enabled_8zlqp_56",T="_disabled_8zlqp_61",I="_error_8zlqp_66",q="_statusInfo_8zlqp_71",z="_statusItem_8zlqp_77",y="_statusLabel_8zlqp_83",w="_statusValue_8zlqp_89",C="_boolean_8zlqp_95",E="_infoCard_8zlqp_108",V="_infoTitle_8zlqp_116",B="_infoContent_8zlqp_123",k="_infoList_8zlqp_129",A="_infoListItem_8zlqp_135",D="_infoListIcon_8zlqp_146",M="_infoListText_8zlqp_157",H="_warningCard_8zlqp_161",P="_warningTitle_8zlqp_169",U="_warningContent_8zlqp_179",F="_metricsCard_8zlqp_185",$="_metricsTitle_8zlqp_192",G="_metricsGrid_8zlqp_199",R="_metricItem_8zlqp_205",O="_metricValue_8zlqp_213",Y="_metricLabel_8zlqp_220",J="_loadingState_8zlqp_226",K="_loadingSpinner_8zlqp_231",e={page:p,pageHeader:f,pageTitle:j,pageDescription:g,statusCard:N,statusHeader:L,statusTitle:v,statusBadge:b,enabled:S,disabled:T,error:I,statusInfo:q,statusItem:z,statusLabel:y,statusValue:w,boolean:C,true:"_true_8zlqp_100",false:"_false_8zlqp_104",infoCard:E,infoTitle:V,infoContent:B,infoList:k,infoListItem:A,infoListIcon:D,infoListText:M,warningCard:H,warningTitle:P,warningContent:U,metricsCard:F,metricsTitle:$,metricsGrid:G,metricItem:R,metricValue:O,metricLabel:Y,loadingState:J,loadingSpinner:K};function ts(){const r=h(),[t,d]=o.useState(null),[a,i]=o.useState(!0);o.useEffect(()=>{(async()=>{try{i(!0);const c=await u.getSystemStatus();d(c)}catch(c){console.error("Failed to load system status:",c),r("Failed to load system status. Please try again.")}finally{i(!1)}})()},[r]);const _=async()=>{try{i(!0);const n=await u.getSystemStatus();d(n)}catch(n){console.error("Failed to refresh system status:",n),r("Failed to refresh system status. Please try again.")}finally{i(!1)}};if(a)return s.jsx("div",{className:e.page,children:s.jsxs("div",{className:e.loadingState,children:[s.jsx("div",{className:e.loadingSpinner}),s.jsx("p",{children:"Loading email settings..."})]})});if(!t)return s.jsx("div",{className:e.page,children:s.jsx("div",{className:e.loadingState,children:s.jsx("div",{className:"text-danger",children:"Failed to load system status"})})});const m=(()=>{if(!t.email_enabled)return{className:e.disabled,text:"Disabled"};switch(t.email_status){case"ok":return{className:e.enabled,text:"Enabled"};case"error":return{className:e.error,text:"Error"};case"disabled":return{className:e.disabled,text:"Disabled"};default:return{className:e.disabled,text:"Unknown"}}})();return s.jsxs("div",{className:e.page,children:[s.jsxs("div",{className:e.pageHeader,children:[s.jsx("h1",{className:e.pageTitle,children:"Email Settings"}),s.jsx("p",{className:e.pageDescription,children:"Monitor email system status and configuration."})]}),s.jsxs("div",{className:e.statusCard,children:[s.jsxs("div",{className:e.statusHeader,children:[s.jsx("h2",{className:e.statusTitle,children:"Email System Status"}),s.jsx("span",{className:`${e.statusBadge} ${m.className}`,children:m.text})]}),s.jsxs("div",{className:e.statusInfo,children:[s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Email Enabled"}),s.jsx("div",{className:`${e.statusValue} ${e.boolean} ${t.email_enabled?e.true:e.false}`,children:t.email_enabled?"Yes":"No"})]}),s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Email Status"}),s.jsx("div",{className:e.statusValue,children:t.email_status})]}),s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Total Users"}),s.jsx("div",{className:e.statusValue,children:t.total_users.toLocaleString()})]}),s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Active Users"}),s.jsx("div",{className:e.statusValue,children:t.active_users.toLocaleString()})]})]})]}),s.jsxs("div",{className:e.infoCard,children:[s.jsx("h3",{className:e.infoTitle,children:"Email Configuration"}),s.jsxs("div",{className:e.infoContent,children:[s.jsx("p",{children:"Email functionality is controlled by environment variables and system configuration. The following settings determine how email features work in the system:"}),s.jsxs("ul",{className:e.infoList,children:[s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üìß"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"EMAIL_ENABLED"})," - Master switch for email functionality"]})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üîß"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"SMTP Settings"})," - SMTP server configuration for sending emails"]})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üîê"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"Authentication"})," - SMTP username and password for server access"]})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üõ°Ô∏è"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"TLS/SSL"})," - Secure connection settings for email transmission"]})]})]})]})]}),!t.email_enabled&&s.jsxs("div",{className:e.warningCard,children:[s.jsx("h3",{className:e.warningTitle,children:"‚ö†Ô∏è Email System Disabled"}),s.jsxs("div",{className:e.warningContent,children:[s.jsx("p",{children:"Email functionality is currently disabled. This means:"}),s.jsxs("ul",{className:e.infoList,children:[s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"‚ùå"}),s.jsx("span",{className:e.infoListText,children:"Password reset emails will not be sent"})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"‚ùå"}),s.jsx("span",{className:e.infoListText,children:"User creation emails will not be sent"})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"‚úÖ"}),s.jsx("span",{className:e.infoListText,children:"Offline password reset will be used instead"})]})]}),s.jsx("p",{children:"To enable email functionality, configure the EMAIL_ENABLED environment variable and provide valid SMTP settings."})]})]}),s.jsxs("div",{className:e.metricsCard,children:[s.jsx("h3",{className:e.metricsTitle,children:"System Metrics"}),s.jsxs("div",{className:e.metricsGrid,children:[s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:a?s.jsx(l,{width:60,height:32}):t.total_users}),s.jsx("div",{className:e.metricLabel,children:"Total Users"})]}),s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:a?s.jsx(l,{width:60,height:32}):t.active_users}),s.jsx("div",{className:e.metricLabel,children:"Active Users"})]}),s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:a?s.jsx(l,{width:60,height:32}):t.total_tokens}),s.jsx("div",{className:e.metricLabel,children:"Total Tokens"})]}),s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:a?s.jsx(l,{width:60,height:32}):t.active_tokens}),s.jsx("div",{className:e.metricLabel,children:"Active Tokens"})]})]})]}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-md)"},children:s.jsx(x,{onClick:_,variant:"outline",children:"Refresh Status"})})]})}export{ts as EmailSettingsPage,ts as default};
