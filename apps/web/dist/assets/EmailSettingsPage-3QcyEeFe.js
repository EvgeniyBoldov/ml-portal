import{c as g,r as o,j as s}from"./index-FkM6qUsl.js";import{a as u}from"./admin-DK_EKAlb.js";import{B as h}from"./Button-t5z5qQ-u.js";import{S as l}from"./Skeleton-3MZmQPtS.js";import"./idempotency-C3fxGORY.js";const x="_page_aozgl_1",f="_pageHeader_aozgl_6",j="_pageTitle_aozgl_10",N="_pageDescription_aozgl_17",p="_statusCard_aozgl_23",L="_statusHeader_aozgl_31",v="_statusTitle_aozgl_38",b="_statusBadge_aozgl_45",S="_enabled_aozgl_56",T="_disabled_aozgl_61",I="_error_aozgl_66",z="_statusInfo_aozgl_71",y="_statusItem_aozgl_77",w="_statusLabel_aozgl_83",C="_statusValue_aozgl_89",E="_boolean_aozgl_95",V="_infoCard_aozgl_108",B="_infoTitle_aozgl_116",k="_infoContent_aozgl_123",A="_infoList_aozgl_129",D="_infoListItem_aozgl_135",M="_infoListIcon_aozgl_146",H="_infoListText_aozgl_157",P="_warningCard_aozgl_161",U="_warningTitle_aozgl_169",F="_warningContent_aozgl_179",$="_metricsCard_aozgl_185",G="_metricsTitle_aozgl_192",R="_metricsGrid_aozgl_199",O="_metricItem_aozgl_205",Y="_metricValue_aozgl_213",q="_metricLabel_aozgl_220",J="_loadingState_aozgl_226",K="_loadingSpinner_aozgl_231",e={page:x,pageHeader:f,pageTitle:j,pageDescription:N,statusCard:p,statusHeader:L,statusTitle:v,statusBadge:b,enabled:S,disabled:T,error:I,statusInfo:z,statusItem:y,statusLabel:w,statusValue:C,boolean:E,true:"_true_aozgl_100",false:"_false_aozgl_104",infoCard:V,infoTitle:B,infoContent:k,infoList:A,infoListItem:D,infoListIcon:M,infoListText:H,warningCard:P,warningTitle:U,warningContent:F,metricsCard:$,metricsTitle:G,metricsGrid:R,metricItem:O,metricValue:Y,metricLabel:q,loadingState:J,loadingSpinner:K};function as(){const r=g(),[a,d]=o.useState(null),[t,i]=o.useState(!0);o.useEffect(()=>{(async()=>{try{i(!0);const c=await u.getSystemStatus();d(c)}catch(c){console.error("Failed to load system status:",c),r("Failed to load system status. Please try again.")}finally{i(!1)}})()},[r]);const _=async()=>{try{i(!0);const n=await u.getSystemStatus();d(n)}catch(n){console.error("Failed to refresh system status:",n),r("Failed to refresh system status. Please try again.")}finally{i(!1)}};if(t)return s.jsx("div",{className:e.page,children:s.jsxs("div",{className:e.loadingState,children:[s.jsx("div",{className:e.loadingSpinner}),s.jsx("p",{children:"Loading email settings..."})]})});if(!a)return s.jsx("div",{className:e.page,children:s.jsx("div",{className:e.loadingState,children:s.jsx("div",{className:"text-danger",children:"Failed to load system status"})})});const m=(()=>{if(!a.email_enabled)return{className:e.disabled,text:"Disabled"};switch(a.email_status){case"ok":return{className:e.enabled,text:"Enabled"};case"error":return{className:e.error,text:"Error"};case"disabled":return{className:e.disabled,text:"Disabled"};default:return{className:e.disabled,text:"Unknown"}}})();return s.jsxs("div",{className:e.page,children:[s.jsxs("div",{className:e.pageHeader,children:[s.jsx("h1",{className:e.pageTitle,children:"Email Settings"}),s.jsx("p",{className:e.pageDescription,children:"Monitor email system status and configuration."})]}),s.jsxs("div",{className:e.statusCard,children:[s.jsxs("div",{className:e.statusHeader,children:[s.jsx("h2",{className:e.statusTitle,children:"Email System Status"}),s.jsx("span",{className:`${e.statusBadge} ${m.className}`,children:m.text})]}),s.jsxs("div",{className:e.statusInfo,children:[s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Email Enabled"}),s.jsx("div",{className:`${e.statusValue} ${e.boolean} ${a.email_enabled?e.true:e.false}`,children:a.email_enabled?"Yes":"No"})]}),s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Email Status"}),s.jsx("div",{className:e.statusValue,children:a.email_status})]}),s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Total Users"}),s.jsx("div",{className:e.statusValue,children:a.total_users.toLocaleString()})]}),s.jsxs("div",{className:e.statusItem,children:[s.jsx("div",{className:e.statusLabel,children:"Active Users"}),s.jsx("div",{className:e.statusValue,children:a.active_users.toLocaleString()})]})]})]}),s.jsxs("div",{className:e.infoCard,children:[s.jsx("h3",{className:e.infoTitle,children:"Email Configuration"}),s.jsxs("div",{className:e.infoContent,children:[s.jsx("p",{children:"Email functionality is controlled by environment variables and system configuration. The following settings determine how email features work in the system:"}),s.jsxs("ul",{className:e.infoList,children:[s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üìß"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"EMAIL_ENABLED"})," - Master switch for email functionality"]})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üîß"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"SMTP Settings"})," - SMTP server configuration for sending emails"]})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üîê"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"Authentication"})," - SMTP username and password for server access"]})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"üõ°Ô∏è"}),s.jsxs("span",{className:e.infoListText,children:[s.jsx("strong",{children:"TLS/SSL"})," - Secure connection settings for email transmission"]})]})]})]})]}),!a.email_enabled&&s.jsxs("div",{className:e.warningCard,children:[s.jsx("h3",{className:e.warningTitle,children:"‚ö†Ô∏è Email System Disabled"}),s.jsxs("div",{className:e.warningContent,children:[s.jsx("p",{children:"Email functionality is currently disabled. This means:"}),s.jsxs("ul",{className:e.infoList,children:[s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"‚ùå"}),s.jsx("span",{className:e.infoListText,children:"Password reset emails will not be sent"})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"‚ùå"}),s.jsx("span",{className:e.infoListText,children:"User creation emails will not be sent"})]}),s.jsxs("li",{className:e.infoListItem,children:[s.jsx("span",{className:e.infoListIcon,children:"‚úÖ"}),s.jsx("span",{className:e.infoListText,children:"Offline password reset will be used instead"})]})]}),s.jsx("p",{children:"To enable email functionality, configure the EMAIL_ENABLED environment variable and provide valid SMTP settings."})]})]}),s.jsxs("div",{className:e.metricsCard,children:[s.jsx("h3",{className:e.metricsTitle,children:"System Metrics"}),s.jsxs("div",{className:e.metricsGrid,children:[s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:t?s.jsx(l,{width:60,height:32}):a.total_users}),s.jsx("div",{className:e.metricLabel,children:"Total Users"})]}),s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:t?s.jsx(l,{width:60,height:32}):a.active_users}),s.jsx("div",{className:e.metricLabel,children:"Active Users"})]}),s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:t?s.jsx(l,{width:60,height:32}):a.total_tokens}),s.jsx("div",{className:e.metricLabel,children:"Total Tokens"})]}),s.jsxs("div",{className:e.metricItem,children:[s.jsx("div",{className:e.metricValue,children:t?s.jsx(l,{width:60,height:32}):a.active_tokens}),s.jsx("div",{className:e.metricLabel,children:"Active Tokens"})]})]})]}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-md)"},children:s.jsx(h,{onClick:_,variant:"outline",children:"Refresh Status"})})]})}export{as as EmailSettingsPage,as as default};
